<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f9ff; }
        canvas { box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen select-none">
    <div class="text-4xl font-bold text-slate-700 mb-4">SNAKE</div>
    <div class="bg-white p-6 rounded-2xl shadow-xl border border-slate-100">
        <div class="flex justify-between items-center mb-4 px-2">
            <div class="text-slate-600 font-semibold">Score: <span id="scoreVal" class="text-emerald-500 text-xl">0</span></div>
            <div class="text-slate-400 text-sm">High Score: <span id="highScoreVal">0</span></div>
        </div>
        <canvas id="gameCanvas" width="400" height="400" class="bg-slate-50 rounded-lg border-2 border-slate-200 cursor-pointer"></canvas>
        <div id="startMsg" class="text-center mt-4 text-slate-500 text-sm animate-pulse">Press Arrow Keys or Tap to Start</div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('scoreVal');
        const highEl = document.getElementById('highScoreVal');
        const msgEl = document.getElementById('startMsg');

        const gridSize = 20;
        const tileCount = canvas.width / gridSize;
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        highEl.innerText = highScore;

        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0;
        let dy = 0;
        let gameInterval;
        let isRunning = false;
        let speed = 100;

        function drawRect(x, y, color, radius = 4) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.roundRect(x * gridSize + 1, y * gridSize + 1, gridSize - 2, gridSize - 2, radius);
            ctx.fill();
        }

        function gameLoop() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};

            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount || snake.some(s => s.x === head.x && s.y === head.y)) {
                resetGame();
                return;
            }

            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreEl.innerText = score;
                if(score > highScore) {
                    highScore = score;
                    highEl.innerText = highScore;
                    localStorage.setItem('snakeHighScore', highScore);
                }
                placeFood();
                if(speed > 50) speed -= 1;
                clearInterval(gameInterval);
                gameInterval = setInterval(gameLoop, speed);
            } else {
                snake.pop();
            }

            draw();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 0.5;
            for(let i=0; i<tileCount; i++) {
                ctx.beginPath(); ctx.moveTo(i*gridSize,0); ctx.lineTo(i*gridSize,canvas.height); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(0,i*gridSize); ctx.lineTo(canvas.width,i*gridSize); ctx.stroke();
            }

            drawRect(food.x, food.y, '#ef4444', 8);
            ctx.fillStyle = 'rgba(255,255,255,0.4)';
            ctx.beginPath();
            ctx.arc(food.x*gridSize + 6, food.y*gridSize + 6, 2, 0, Math.PI*2);
            ctx.fill();

            snake.forEach((part, index) => {
                const isHead = index === 0;
                drawRect(part.x, part.y, isHead ? '#10b981' : '#34d399', isHead ? 6 : 2);
                if(isHead) {
                    ctx.fillStyle = 'white';
                    ctx.beginPath(); ctx.arc(part.x*gridSize + 6, part.y*gridSize + 6, 2, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(part.x*gridSize + 14, part.y*gridSize + 6, 2, 0, Math.PI*2); ctx.fill();
                    ctx.fillStyle = 'black';
                    ctx.beginPath(); ctx.arc(part.x*gridSize + 6, part.y*gridSize + 6, 1, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(part.x*gridSize + 14, part.y*gridSize + 6, 1, 0, Math.PI*2); ctx.fill();
                }
            });
        }

        function placeFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            if(snake.some(s => s.x === food.x && s.y === food.y)) placeFood();
        }

        function resetGame() {
            clearInterval(gameInterval);
            isRunning = false;
            snake = [{x: 10, y: 10}];
            dx = 0; dy = 0;
            score = 0;
            speed = 100;
            scoreEl.innerText = 0;
            msgEl.innerText = "Game Over! Press Arrow Keys to Restart";
            msgEl.classList.remove('hidden');
            draw();
        }

        function startGame() {
            if (isRunning || dx === 0 && dy === 0) return;
            isRunning = true;
            msgEl.classList.add('hidden');
            gameInterval = setInterval(gameLoop, speed);
        }

        function setDir(dir) {
            if (dx !== 0 && dir.x === -dx) return;
            if (dy !== 0 && dir.y === -dy) return;
            dx = dir.x;
            dy = dir.y;
            startGame();
        }

        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp': setDir({x:0, y:-1}); break;
                case 'ArrowDown': setDir({x:0, y:1}); break;
                case 'ArrowLeft': setDir({x:-1, y:0}); break;
                case 'ArrowRight': setDir({x:1, y:0}); break;
            }
        });
        
        canvas.addEventListener('click', () => {
            if(!isRunning && dx === 0 && dy === 0) setDir({x:1, y:0});
        });

        draw();
    </script>
</body>
</html>